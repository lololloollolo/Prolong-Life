angular.module('starter').controller("LayoutproViewController",function($log,$scope,$stateParams,$timeout,Layoutpro){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id});Layoutpro.setValueId($stateParams.value_id);$scope.loadContent=function(){Layoutpro.find().then(function(data){$scope.layoutpro=data.layoutpro;$scope.page_title=data.page_title;if($scope.layoutpro.code&&(typeof $scope.layoutpro.code==="string")){$scope.is_loading=!0;$timeout(function(){try{var iframe=document.querySelector('#layoutpro-iframe[data-value-id="'+$scope.value_id+'"]');iframe=iframe.contentWindow||iframe.contentDocument.document||iframe.contentDocument;iframe.document.open();iframe.document.write($scope.layoutpro.code);iframe.document.close()}catch(e){$log.error(e)}
$scope.is_loading=!1},20)}},function(data){$log.error("Layoutpro error",data)}).then(function(){$scope.is_loading=!1})};$scope.loadContent()});angular.module("starter").factory('Layoutpro',function($pwaRequest){var factory={value_id:null,extendedOptions:{}};factory.setValueId=function(value_id){factory.value_id=value_id};factory.setExtendedOptions=function(options){factory.extendedOptions=options};factory.find=function(){if(!this.value_id){$pwaRequest.reject("[Factory::Layoutpro.find] missing value_id")}
var payload=$pwaRequest.getPayloadForValueId(factory.value_id);if(payload!==!1){return $pwaRequest.resolve(payload)}else{return $pwaRequest.get("layoutpro/mobile_view/find",angular.extend({urlParams:{value_id:this.value_id}},factory.extendedOptions))}};return factory});Features.insertCSS("","layoutpro")